<head>
<script type="module">
	import { GitHubHandler } from './GitHubHandler.js';
	import { JiraHandler } from './JiraHandler.js'
	import { DataCombiner } from './DataCombiner.js'

	const owner = localStorage.getItem('OWNER');
	const repo = localStorage.getItem('REPO');
	const token = localStorage.getItem('TOKEN');


	function clearColumns() {
		document.getElementById('in-dev').innerHTML = "In Dev | "
		document.getElementById('review').innerHTML = "Review | "
		document.getElementById('awaiting-merge').innerHTML = "Awaiting Merge | "
	}

	function drawColumns() {
		clearColumns();
		gitHubHandler.branches.forEach((branch) => {
			if (branch.location == "DEV") {
				document.getElementById('in-dev').innerHTML += "<div>" + branch.name + "</div>"
			} else if (branch.location == "PR") {
				document.getElementById('review').innerHTML += "<div>" + branch.name + "</div>"
			} else if (branch.location == "AM") {
				document.getElementById('awaiting-merge').innerHTML += "<div>" + branch.name + "</div>"
			}
		})
	}

	
	const gitHubHandler = new GitHubHandler(owner, repo, token);
	const jiraHandler = new JiraHandler();
	const dataCombiber = new DataCombiner(jiraHandler, gitHubHandler, drawColumns);


	/*
		Create an map for all items to display on the ticket. 
			Jira ID is the key to the map
		Create an Unmapped array for all other Pull Requests
		Each of these items should have
			- Link to  Jira Data 
			- Array of Branches
	*/

</script>
</head>
<body>
<div>Hello World!</div>
<div id='todo'>Todo</div>
<br />
<div id='in-dev'>In Dev | </div>
<br />
<div id='review'> | </div>
<br />
<div id='awaiting-merge'>Awaiting Merge</div>
<br />
<div id='done'>Done</div>
</body>
